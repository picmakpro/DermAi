# üìö R√àGLES DOCUMENTATION DERMAI V2

## üéØ PRINCIPE FONDAMENTAL
**spec.md est le point central** qui r√©sume TOUTES les sp√©cificit√©s de l'application et r√©f√©rence TOUTE la documentation.

## üìÅ STRUCTURE DOCUMENTAIRE OBLIGATOIRE

### **Localisation des documents**
- **TOUS** les documents de sp√©cifications doivent √™tre dans `/docs/`
- **AUCUN** document `.md` de sp√©cification √† la racine (sauf README.md projet)
- **INTERDICTION** de cr√©er des documents temporaires de correction/changelog

### **Documents centraux autoris√©s dans /docs/**
1. **spec.md** - Point central, r√©sum√© complet application
2. **architecture-database.md** - Architecture base de donn√©es
3. **planning-dermai-v2.md** - Roadmap et planning
4. **monetization-strategy.md** - Strat√©gie business et revenus
5. **dermatological-logic.md** - Logique m√©tier dermatologique
6. **educational-interface.md** - Interface √©ducative utilisateur
7. **dermai-diagnostic-improvement-strategy.md** - Am√©lioration IA
8. **README.md** - Index navigation documentation

## üö® R√àGLES STRICTES DE CR√âATION

### **AVANT de cr√©er un nouveau document :**
1. **OBLIGATOIRE** : V√©rifier si l'information peut √™tre int√©gr√©e dans un document existant
2. **SI NOUVEAU DOCUMENT n√©cessaire** :
   - Cr√©er d'ABORD la section dans `spec.md` qui r√©f√©rence ce nouveau document
   - Expliquer dans `spec.md` pourquoi ce document s√©par√© est n√©cessaire
   - Ajouter le lien dans `docs/README.md` section appropri√©e

### **Types de documents INTERDITS :**
‚ùå `CORRECTION_*.md` - Int√©grer directement dans le code ou doc principal
‚ùå `FIX_*.md` - Corriger directement, pas de documentation interm√©diaire  
‚ùå `CHANGELOG_*.md` - Utiliser git commits et int√©grer dans doc principal
‚ùå `SUMMARY_*.md` - R√©sumer dans le document principal concern√©
‚ùå `IMPLEMENTATION_*.md` - Documenter dans spec.md section technique
‚ùå `UPDATE_*.md` - Mettre √† jour le document principal directement
‚ùå Tout fichier temporaire de correction ou de travail

### **Cas autoris√©s pour NOUVEAU document :**
‚úÖ **Nouvelle fonctionnalit√© majeure** (ex: Dashboard utilisateur)
‚úÖ **Nouveau compartiment technique** (ex: Syst√®me de paiement)
‚úÖ **Nouvelle int√©gration externe** (ex: API Shopify)
‚úÖ **Nouvelle strat√©gie business** (ex: Mod√®le SaaS)

## üìù PROC√âDURE OBLIGATOIRE NOUVELLE FONCTIONNALIT√â

### **√âtape 1 : Mise √† jour spec.md**
```markdown
## X. [NOUVEAU] Nom de la fonctionnalit√©

### X.1. Vue d'ensemble
[Description courte de la fonctionnalit√©]

### X.2. Architecture technique
[R√©sum√© technique]

### X.3. Documentation d√©taill√©e
Voir [nom-fonctionnalite.md](./nom-fonctionnalite.md) pour les sp√©cifications compl√®tes.
```

### **√âtape 2 : Cr√©ation document d√©taill√©**
- Nom : `docs/nom-fonctionnalite.md`
- Structure obligatoire :
```markdown
# Nom de la Fonctionnalit√©

## Vue d'ensemble
[Lien avec l'√©cosyst√®me DermAI]

## Sp√©cifications techniques
[D√©tails complets]

## Int√©gration
[Comment s'int√®gre avec l'existant]
```

### **√âtape 3 : Mise √† jour README.md**
Ajouter dans la section appropri√©e de `docs/README.md`

## üõ†Ô∏è R√àGLES DE MODIFICATION

### **Modification existante :**
- Modifier DIRECTEMENT le document principal concern√©
- PAS de document interm√©diaire de correction
- Si changement majeur : noter dans spec.md section concern√©e

### **Correction de bug/probl√®me :**
- Corriger le code directement
- Si impact sur architecture : mettre √† jour spec.md
- PAS de document de correction s√©par√©

### **Am√©lioration UX/UI :**
- Si mineure : pas de documentation
- Si majeure : section dans spec.md + mise √† jour document concern√©

## üéØ RESPONSABILIT√âS PAR DOCUMENT

### **spec.md doit contenir :**
- Vue d'ensemble compl√®te de l'application
- Toutes les fonctionnalit√©s (r√©sum√©)
- Architecture technique globale
- Stack technologique compl√®te
- Configuration d√©ploiement
- R√©f√©rences √† TOUS les autres documents

### **Documents sp√©cialis√©s contiennent :**
- D√©tails approfondis de leur domaine
- Sp√©cifications techniques pr√©cises
- Exemples et cas d'usage
- Proc√©dures sp√©cifiques

## ‚ö†Ô∏è SANCTIONS AUTOMATIQUES

Si ces r√®gles ne sont pas respect√©es :
1. **Document mal plac√©** ‚Üí D√©placer imm√©diatement dans /docs/
2. **Document temporaire** ‚Üí Int√©grer contenu et supprimer
3. **spec.md non mis √† jour** ‚Üí Ajouter r√©f√©rence obligatoire
4. **Information dupliqu√©e** ‚Üí Consolider dans document principal

## üîÑ MAINTENANCE DOCUMENTATION

### **R√©vision mensuelle obligatoire :**
- V√©rifier que spec.md r√©f√©rence tout
- Supprimer documents obsol√®tes
- Consolider informations √©parpill√©es
- Mettre √† jour liens et r√©f√©rences

### **Avant chaque release majeure :**
- Validation compl√®te de spec.md
- V√©rification coh√©rence entre documents
- Mise √† jour des exemples et proc√©dures

## üìä EXEMPLE CONCRET

**‚ùå MAUVAIS :**
```
/DASHBOARD_IMPLEMENTATION.md
/USER_PROFILE_FIXES.md
/PAYMENT_SYSTEM_DRAFT.md
```

**‚úÖ BON :**
```
/docs/spec.md (avec section Dashboard r√©f√©ren√ßant dashboard.md)
/docs/dashboard.md (sp√©cifications compl√®tes Dashboard)
Code corrig√© directement (pas de doc s√©par√©)
/docs/payment-integration.md (si vraiment nouveau syst√®me)
```

Cette organisation documentaire est **NON-N√âGOCIABLE** et doit √™tre respect√©e par tous les contributeurs pour maintenir la clart√© et la maintenabilit√© du projet DermAI V2.

---

# üß¨ R√àGLES SP√âCIFIQUES DERMAI V2

## üè• **CONFORMIT√â DERMATOLOGIQUE**

### **Principes M√©dicaux Non-N√©gociables**
- ‚ùå **JAMAIS de diagnostic m√©dical** - Rester dans l'univers cosm√©tique
- ‚ùå **JAMAIS de termes anxiog√®nes** : "maladie", "pathologie", "traitement m√©dical"
- ‚úÖ **Toujours utiliser** : "soin", "am√©lioration", "optimisation", "routine beaut√©"
- ‚úÖ **Validation scientifique** : Respecter cycle cellulaire 28 jours dans la logique des phases

### **Vocabulaire Autoris√©/Interdit**
```
‚ùå INTERDIT                    ‚úÖ AUTORIS√â
"Votre peau est ab√Æm√©e"    ‚Üí   "Votre peau montre des zones √† optimiser"
"Traitement m√©dical"       ‚Üí   "Soin cibl√©"
"Pathologie cutan√©e"       ‚Üí   "Pr√©occupation beaut√©"
"Diagnostic m√©dical"       ‚Üí   "Analyse personnalis√©e"
```

## üé® **COH√âRENCE UI/UX**

### **Design System Obligatoire**
- **Couleurs** : Palette d√©finie dans `spec.md` section 6.1.1
- **Typographie** : Inter pour UI, Neue Haas Grotesk pour branding
- **Composants** : R√©utiliser les composants existants `/src/components/`
- **Responsive** : Mobile-first obligatoire

### **R√®gles d'Interface**
- **Num√©rotation phases** : Toujours 1,2,3... par phase (jamais 100, 200...)
- **Badges temporels** : Ic√¥nes coh√©rentes ‚òÄÔ∏èüåôüìà‚ö°
- **Messages** : Ton bienveillant et expert, jamais anxiog√®ne
- **Loading states** : Toujours pr√©voir √©tats de chargement

## ü§ñ **LOGIQUE IA ET PROMPTS**

### **G√©n√©ration de Routines**
- **3 Phases obligatoires** : Imm√©diate ‚Üí Adaptation ‚Üí Maintenance
- **Transition intelligente** : Base durable identifi√©e et conserv√©e
- **Crit√®res visuels** : Jamais de timing arbitraire, toujours crit√®res observables
- **D√©duplication** : √âviter produits en double dans vue horaires

### **Prompts GPT-4o Vision**
- **Non-directif** : "Analysez objectivement" vs "Cherchez des poils incarn√©s"
- **Adaptatif** : Prompt selon profil utilisateur (√¢ge, genre, type peau)
- **Scoring coh√©rent** : Pond√©ration dynamique selon contexte
- **Seuils s√©curit√©** : Jamais >85/100 si incertitude, sugg√©rer consultation si s√©v√®re

## üîß **ARCHITECTURE TECHNIQUE**

### **Structure de Code Obligatoire**
```
src/
‚îú‚îÄ‚îÄ app/              # Pages Next.js 15 App Router
‚îú‚îÄ‚îÄ components/       # Composants r√©utilisables
‚îÇ   ‚îú‚îÄ‚îÄ forms/       # Formulaires et questionnaires
‚îÇ   ‚îú‚îÄ‚îÄ results/     # Affichage r√©sultats
‚îÇ   ‚îú‚îÄ‚îÄ shared/      # Composants partag√©s
‚îÇ   ‚îî‚îÄ‚îÄ upload/      # Upload de photos
‚îú‚îÄ‚îÄ services/        # Logique m√©tier
‚îÇ   ‚îú‚îÄ‚îÄ ai/         # Services IA
‚îÇ   ‚îú‚îÄ‚îÄ affiliate/  # Affiliation produits
‚îÇ   ‚îî‚îÄ‚îÄ educational/ # Interface √©ducative
‚îú‚îÄ‚îÄ types/          # Types TypeScript
‚îî‚îÄ‚îÄ utils/          # Utilitaires
```

### **Convention de Nommage**
- **Composants** : PascalCase (`AnalysisService`, `PhotoUploadZone`)
- **Fichiers** : kebab-case (`analysis.service.ts`, `photo-upload-zone.tsx`)
- **Variables** : camelCase (`beautyAssessment`, `routineSteps`)
- **Types** : PascalCase avec suffixe (`UnifiedRoutineStep`, `BeautyAssessment`)

### **Performance Obligatoire**
- **Images** : Compression automatique selon nombre (voir `utils/images/compressForAPI.ts`)
- **API** : Timeout 30s max, gestion erreurs gracieuse
- **Bundle** : Code splitting par route, lazy loading composants lourds
- **Types** : TypeScript strict, pas de `any`

## üì± **MOBILE-FIRST**

### **Responsive Design**
- **Breakpoints** : `sm:` (640px), `md:` (768px), `lg:` (1024px), `xl:` (1280px)
- **Touch-friendly** : Boutons minimum 44px, espacements suffisants
- **Performance mobile** : Images WebP, compression aggressive
- **Offline** : IndexedDB pour cache, graceful degradation

### **Export Mobile**
- **Format fixe** : 512x512px pour r√©seaux sociaux
- **Qualit√©** : High-DPI, logo DermAI visible
- **Contenu** : Condens√© mais lisible, branding professionnel

## üí∞ **AFFILIATION ET BUSINESS**

### **Catalogue Interne**
- **Produits cur√©s** : Jamais de produits g√©n√©riques ("Soin cibl√© adapt√©")
- **Prix r√©els** : Toujours afficher prix et liens d'achat
- **Tracking** : √âv√©nements analytics pour conversions
- **Fallback** : Si API externe fail, utiliser catalogue interne

### **Recommandations**
- **Contextuel** : Selon √¢ge, budget, type peau, pr√©f√©rences
- **√âviter surdosage** : Maximum 5 produits par routine
- **Transparence** : Indiquer si lien d'affiliation

## üß™ **TESTS ET VALIDATION**

### **Tests Obligatoires**
- **Unit tests** : Services critiques (`analysis.service.ts`, calculs de phases)
- **E2E tests** : Parcours complet upload ‚Üí diagnostic ‚Üí routine
- **Mobile testing** : Tous devices, export fonctionnel
- **Performance** : Lighthouse score >90 mobile

### **Validation Dermatologique**
- **Cas de test** : Profils vari√©s (jeune/mature, homme/femme, sensible)
- **Coh√©rence scores** : V√©rification √©cart vs expert <10%
- **Timing phases** : Validation dur√©es selon profil
- **Feedback loop** : Collecte retours utilisateurs

## üåç **INTERNATIONALISATION**

### **Pr√©paration i18n**
- **Textes externalis√©s** : Pas de strings hard-cod√©es
- **Format dates** : Locale-aware
- **Responsive texte** : Gestion longueurs variables
- **RTL ready** : Structure compatible droite-√†-gauche

### **Accessibilit√© (A11y)**
- **ARIA labels** : Composants interactifs √©tiquet√©s
- **Contrast** : Minimum AA (4.5:1)
- **Keyboard navigation** : Tous les flows navigables au clavier
- **Screen readers** : Contenu structur√© s√©mantiquement

## üìä **ANALYTICS ET TRACKING**

### **√âv√©nements Critiques**
- `photo_uploaded` : Photos analys√©es
- `questionnaire_completed` : Questionnaire termin√©
- `analysis_completed` : Diagnostic g√©n√©r√©
- `product_clicked` : Interaction produit
- `routine_viewed` : Vue routine par phase
- `export_mobile` : Partage mobile

### **Privacy-First**
- **RGPD compliant** : Consentement explicite
- **Data minimization** : Collecter minimum n√©cessaire
- **Anonymisation** : Pas d'identification personnelle
- **Retention** : Purge automatique donn√©es anciennes

---

**Ces r√®gles compl√©mentent l'organisation documentaire et garantissent la qualit√©, coh√©rence et conformit√© du projet DermAI V2.**